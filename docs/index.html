<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<title>QueryizeJS - API Reference</title>
		<link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.2.0/css/bootstrap.css">
		<link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.2.0/css/bootstrap-theme.css">
		<link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/prettify/r298/prettify.min.css">
		<link rel="stylesheet" href="fonts.css">
		<style>

			.jumbotron {
				margin-top: 30px;
				background-color: #333;
				color: white;
			}

			.jumbotron .btn-code {
				font-family: Menlo, Monaco, Consolas, "Courier New", monospace;
				text-shadow: 0 1px 0 rgba(0,0,0,0.2);
			}

			.jumbotron .prettyprint {
				padding: 10px;
			}

			pre {
				box-shadow: 0 1px 2px rgba(100,100,100,0.2);
				background-color: #f8f8f8;
				border-color: #ddd;
			}

			pre code {
				word-wrap: normal;
				white-space: pre;
			}

			.sidenav .nav > li > a {
				padding: 2px 15px;
			}

			.sidenav span.name {
				vertical-align: middle;
				display: inline-block;
				line-height: 1;
			}

			.sidenav .ico-arrow-up {
				color: #ccc;
				font-size: 12px;
			}

			.sidenav .alias .name {
				color: #ccc;
				font-size: 12px;
				margin-left: 10px;
			}

			.category {
				margin-top: 5px;
			}

			.nav > li.category > a {
				color: #666;
				text-shadow: 0 1px 0 rgba(255,255,255,.5);
				background: none;
			}

			.category > ul a {
				background: #fbfbfb;
				
			}

			.pieces .private, .nav .private {
				display: none;
			}

			.pieces .page-header, .pieces h2 {
				margin-top: 0;
			}

			.pieces h3 {
				font-size: 15px;
			}

			.signature .list-group strong {
				margin-right: 20px;
			}

			.signature .list-group em, .signature u {
				margin-left: 20px;
			}

			.signature .panel-footer em {
				color: #999;
			}

			.signature pre.panel-body + pre.panel-body {
				border-top: 1px solid #ddd;
				border-top-left-radius: 0;
				border-top-right-radius: 0;
			}

			.codeview .panel-heading {
				font-size: 12px;
				padding: 5px;
				cursor: pointer;
			}

			.codeview .panel-heading .ico-embed {
				font-size:16px;
				line-height: 1;
				vertical-align: middle;
				position:relative;
				top: -1px;
			}

			pre.panel-body, pre.panel-body.prettyprint  {
				padding: 8px;
				border: none;
				font-size: 11px;
				line-height: 13px;
				margin-bottom: 0;
				background-color: #fbfbfb;
				
			}


			pre.panel-body:before, pre.panel-body:after {
				content: '';
			}

			.kwd {font-weight: bold;}

			.nav-list {
				padding-left: 15px;
				padding-right: 15px;
				margin-bottom: 0;
			}

			.nav-list > li > a,
			.nav-list .nav-header {
				margin-left: -15px;
				margin-right: -15px;
				text-shadow: 0 1px 0 rgba(255, 255, 255, .5);
			}

			.nav-list > li > a {
				padding: 3px 15px;
			}

			.nav-header {
				display: block;
				padding: 3px 15px;
				font-size: 11px;
				font-weight: bold;
				line-height: 1.428571429;
				color: #999;
				text-shadow: 0 1px 0 rgba(255,255,255,.5);
				text-transform: uppercase;
			}

			.nav > .nav-header > a:hover {
				background: none;
			}

			.gh-link {
				margin: 8px 0 0 15px;
			}

			.navbar .ico-github {
				font-size: 32px;
				text-decoration: none;
			}

			footer {
				text-align: center;
				font-size: 10px;
			}

			@media (max-width: 768px) {
				.navbar-fixed-top {
					display: none;
				}

				.jumbotron {
					margin-top: 0;
				}

			}



		</style>
	</head>
	
	<body>
		<div class="navbar navbar-default navbar-fixed-top">
			<div class="container">
				<div class="navbar-header"><a class="navbar-brand" href="#">Queryize.js</a></div>
				<ul class="nav navbar-nav">
					<li><a href="#reference">API Reference</a></li>
				</ul>
				<p class="navbar-right gh-link"><a href="http://github.com/chipersoft/queryizejs" class="ico-github"></a></p>
				<p class="navbar-text navbar-right">Created by <a href="http://chipersoft.com" class="navbar-link">Jarvis Badgley</a></p>
			</div>
		</div>

		<div class="jumbotron">
			<div class="container">
				<h1>Queryize.js</h1>
				<p>A no-frills chainable interface for constructing mutable MySQL queries procedurally in Node.js</p>
				<p>
					<a href="http://npmjs.org/queryize" class="btn btn-default btn-code btn-success">npm install queryize</a>
					<a href="http://github.com/chipersoft/queryizejs" class="btn btn-primary">View on GitHub</a>
					<a href="http://github.com/chipersoft/queryizejs/issues" class="btn btn-danger">Report an Issue</a>
				</p>
				<p>
					<a href="http://badge.fury.io/js/queryize"><img src="https://img.shields.io/npm/v/queryize.svg?style=flat" alt="NPM Version" height="18"></a>
					<img src="https://img.shields.io/npm/l/queryize.svg?style=flat" alt="License: MIT" height="18">
					<a href="http://npmjs.org/queryize"><img src="https://img.shields.io/npm/dm/queryize.svg?style=flat" alt="Downloads/Week" height="18"></a>
					<a href="https://travis-ci.org/ChiperSoft/QueryizeJS"><img src="https://img.shields.io/travis/chipersoft/queryize.svg?style=flat" alt="Build Status" height="18"></a>
					<a href="https://coveralls.io/r/chipersoft/queryize"><img src="https://img.shields.io/coveralls/chipersoft/queryize.svg?style=flat" alt="Coverage" height="18"></a>
					<a href="https://www.gittip.com/chipersoft"><img src="http://img.shields.io/gittip/chipersoft.svg?style=flat" alt="Gittip" height="18"></a>
				</p>

  				<pre class="prettyprint"><code class="language-javascript">var insert = queryize.insert;
var q = insert()
  .into('users', 'u')
  .set({name: 'John Doe', email: 'user@example.com'})
  .compile();

//q.query contains INSERT INTO users SET u.name = ?, u.email = ?
//q.data contains  ['John Doe', 'user@example.com']</code></pre>
				<p>Supports node-mysql and node-mysql2 connections and connection pools for executing queries directly.</p>
				<pre class="prettyprint"><code class="language-javascript">var queryize = require('queryize');
var connection = require('mysql').createConnection('mysql://dev@localhost/testdb');

queryize()
  .from('employees').select()
  .where({city: ['Chicago', 'Miami', 'San Francisco']})
  .orderBy('lastname', 'firstname')
  .exec(connection, function (err, results) {
    if (err) console.error(err);
    else console.log(results);
  });</code></pre>
				<p>Extends the node-mysql query object for use as a promise.</p>
  				<pre class="prettyprint"><code class="language-javascript">var yesterday = new Date();
yesterday.setDate(d.getDate() - 1);

queryize.deleteFrom('eventlog')
  .whereInRange('dts', null, yesterday)
  .exec(connection)
  .then(function () {
  	console.log('Events Deleted');
  })
  .catch(function (err) {
	console.error(err);
  });</code></pre>
			</div>
			</div>

		</div>

		<div id="reference" style="position:relative;top:-60px;"></div>
		<div class="container">
			<div class="row">
				<div class="col-sm-3 sidenav">
					<ul class="nav nav-list">
					
						
						<li class="private "><a href="#function_uniqueId"><span class="name">_uniqueId</span></a></li>
						
						<li class=" "><a href="#functionqueryize"><span class="name">queryize</span></a></li>
						
						<li class="private "><a href="#functionflatten"><span class="name">flatten</span></a></li>
						
						<li class="private "><a href="#functionextend"><span class="name">extend</span></a></li>
						
						<li class="private "><a href="#function_convertNamedParameters"><span class="name">_convertNamedParameters</span></a></li>
						
						<li class="private "><a href="#function_escapeValue"><span class="name">_escapeValue</span></a></li>
						
						<li class="private "><a href="#function_processWhereCondition"><span class="name">_processWhereCondition</span></a></li>
						
						<li class="private "><a href="#function_processWhereObject"><span class="name">_processWhereObject</span></a></li>
						
						<li class="private "><a href="#function_makeJoiner"><span class="name">_makeJoiner</span></a></li>
						
						<li class="private "><a href="#function_processJoinOns"><span class="name">_processJoinOns</span></a></li>
						
						<li class="private "><a href="#function_buildTableName"><span class="name">_buildTableName</span></a></li>
						
						
					
					
						<li class="nav-header"><a>query</a></li>
						<li><ul class="nav ">
						
							<li class="private "><a href="#functionqueryexport"><span class="name">query.export</span></a></li>
						
						
								<li class="category"><a>Data</a>
									<ul class="nav subnav">
							
										<li class=" "><a href="#functionqueryinsertBinding"><span class="name">query.insertBinding</span></a></li>
							
										<li class=" "><a href="#functionquerycreateBinding"><span class="name">query.createBinding</span></a></li>
							
									</ul>
								</li>
						
								<li class="category"><a>Action</a>
									<ul class="nav subnav">
							
										<li class=" "><a href="#functionqueryselect"><span class="name">query.select</span></a></li>
							
										<li class=" "><a href="#functionquerydeleteFrom"><span class="name">query.deleteFrom</span></a></li>
							
										<li class=" alias"><a href="#functionquerydeleteFrom"><i class="ico-arrow-up"></i><span class="name">query.deleet</span></a></li>
							
										<li class=" "><a href="#functionqueryinsert"><span class="name">query.insert</span></a></li>
							
										<li class=" "><a href="#functionqueryupdate"><span class="name">query.update</span></a></li>
							
									</ul>
								</li>
						
								<li class="category"><a>Sourcing</a>
									<ul class="nav subnav">
							
										<li class=" "><a href="#functionquerytable"><span class="name">query.table</span></a></li>
							
										<li class=" alias"><a href="#functionquerytable"><i class="ico-arrow-up"></i><span class="name">query.into</span></a></li>
							
										<li class=" alias"><a href="#functionquerytable"><i class="ico-arrow-up"></i><span class="name">query.from</span></a></li>
							
										<li class=" "><a href="#functionquerydatabase"><span class="name">query.database</span></a></li>
							
										<li class=" "><a href="#functionquerycolumns"><span class="name">query.columns</span></a></li>
							
									</ul>
								</li>
						
								<li class="category"><a>Reduction</a>
									<ul class="nav subnav">
							
										<li class=" "><a href="#functionquerycomparisonMethod"><span class="name">query.comparisonMethod</span></a></li>
							
										<li class=" "><a href="#functionquerywhere"><span class="name">query.where</span></a></li>
							
										<li class=" "><a href="#functionquerywhereBetween"><span class="name">query.whereBetween</span></a></li>
							
										<li class=" "><a href="#functionquerywhereLike"><span class="name">query.whereLike</span></a></li>
							
										<li class=" "><a href="#functionquerywhereNot"><span class="name">query.whereNot</span></a></li>
							
										<li class=" "><a href="#functionquerywhereNotLike"><span class="name">query.whereNotLike</span></a></li>
							
										<li class=" "><a href="#functionquerywhereInRange"><span class="name">query.whereInRange</span></a></li>
							
									</ul>
								</li>
						
								<li class="category"><a>Selection</a>
									<ul class="nav subnav">
							
										<li class=" "><a href="#functionqueryorderBy"><span class="name">query.orderBy</span></a></li>
							
										<li class=" "><a href="#functionquerygroupBy"><span class="name">query.groupBy</span></a></li>
							
										<li class=" "><a href="#functionquerydistinct"><span class="name">query.distinct</span></a></li>
							
										<li class=" "><a href="#functionquerylimit"><span class="name">query.limit</span></a></li>
							
									</ul>
								</li>
						
								<li class="category"><a>Insertion &amp; Replacement</a>
									<ul class="nav subnav">
							
										<li class=" "><a href="#functionqueryset"><span class="name">query.set</span></a></li>
							
									</ul>
								</li>
						
								<li class="category"><a>Inclusion</a>
									<ul class="nav subnav">
							
										<li class=" "><a href="#functionqueryjoin"><span class="name">query.join</span></a></li>
							
										<li class=" "><a href="#functionqueryinnerJoin"><span class="name">query.innerJoin</span></a></li>
							
										<li class=" "><a href="#functionqueryleftJoin"><span class="name">query.leftJoin</span></a></li>
							
										<li class=" "><a href="#functionqueryrightJoin"><span class="name">query.rightJoin</span></a></li>
							
									</ul>
								</li>
						
								<li class="category"><a>Evaluation</a>
									<ul class="nav subnav">
							
										<li class=" "><a href="#functionquerycompile"><span class="name">query.compile</span></a></li>
							
										<li class=" "><a href="#functionqueryexec"><span class="name">query.exec</span></a></li>
							
										<li class=" alias"><a href="#functionqueryexec"><i class="ico-arrow-up"></i><span class="name">query.run</span></a></li>
							
									</ul>
								</li>
						
						</ul></li>
					
						<li class="nav-header"><a>queryize</a></li>
						<li><ul class="nav ">
						
							<li class=" "><a href="#methodqueryizeselect"><span class="name">queryize.select</span></a></li>
						
							<li class=" "><a href="#methodqueryizeupdate"><span class="name">queryize.update</span></a></li>
						
							<li class=" "><a href="#methodqueryizeinsert"><span class="name">queryize.insert</span></a></li>
						
							<li class=" "><a href="#methodqueryizedeleteFrom"><span class="name">queryize.deleteFrom</span></a></li>
						
							<li class=" alias"><a href="#methodqueryizedeleteFrom"><i class="ico-arrow-up"></i><span class="name">queryize.deleet</span></a></li>
						
						
						</ul></li>
					
					</ul>
				</div>


				<div class="col-sm-9 pieces">
				
					<div class="piece private " id="function_uniqueId">
						<div class="page-header"><h2>_uniqueId <small></small></h2></div>
					
						<p>creates a string that is unique to this runtime session</p>

						<h3>Usage:</h3>
						
						<div class="signature panel panel-default">
							<div class="panel-heading"><div class="panel-title">_uniqueId([prefix])</div></div>
							<ol class="list-group">
							
								<li class="list-group-item">
									<strong>prefix</strong> string
									<em>Optional </em>
									<br>
								</li>
							
							</ol>
							
							
							<div class="panel-footer"><strong>Returns: </strong> string <em class="pull-right"></em></div>
							
						</div>
						


						<div class="codeview panel panel-default">
							<div class="panel-heading" data-toggle="collapse" data-target="#function_uniqueId .panel-collapse">
								<i class="ico-embed"></i> View Code
							</div>
							<div class="panel-collapse collapse">
								<pre class="panel-body prettyprint"><code class="language-javascript">function _uniqueId(prefix) {
  var id = (++idCounter).toString(16);
  return prefix ? prefix + id : id;
}</code></pre>
							</div>
						</div>
					
					</div>
				
					<div class="piece  " id="functionqueryize">
						<div class="page-header"><h2>queryize <small></small></h2></div>
					
						<p>Creates a <code>query</code> object which encapsulates the state of the query to be generated<br />and provides the methods to manipulate that query.</p>

						<h3>Usage:</h3>
						
						<div class="signature panel panel-default">
							<div class="panel-heading"><div class="panel-title">queryize([original])</div></div>
							<ol class="list-group">
							
								<li class="list-group-item">
									<strong>original</strong> query, Object
									<em>Optional </em>
									<br>An existing query object to duplicate.
								</li>
							
							</ol>
							
							<pre class="panel-body prettyprint"><code class="language-javascript">var queryize = require('queryize');
var query = queryize();</code></pre>
							
							
							<div class="panel-footer"><strong>Returns: </strong> query <em class="pull-right">Returns a &#x60;query&#x60; instance.</em></div>
							
						</div>
						


						<div class="codeview panel panel-default">
							<div class="panel-heading" data-toggle="collapse" data-target="#functionqueryize .panel-collapse">
								<i class="ico-embed"></i> View Code
							</div>
							<div class="panel-collapse collapse">
								<pre class="panel-body prettyprint"><code class="language-javascript">var queryize = function (original) {

  var debugEnabled = false;

  var useBoundParameters = queryize.useBoundParameters;

  var dataBindings = {};

  var attributes = {
    database: false,
    tableName: false,
    tableAlias: false,
    where: [],
    whereBoolean: ' AND ',
    set: [],
    columns: ['*'],
    joins: [],
    orderBy: false,
    groupBy: false,
    distinct: false,
    limit: false,
    builder: false
  };

  if (original) extend(attributes, original._isQueryizeObject ? original.export() : original);

  var isArray = Array.isArray;

  function isDefined(value) {
    return value !== undefined && value !== null;
  }

  function isValidPrimative(value) {
    return typeof value === 'string' ||
      typeof value === 'boolean' ||
      typeof value === 'number' ||
      value === null ||
      (value instanceof Date);
  }</code></pre>
							</div>
						</div>
					
					</div>
				
					<div class="piece private " id="functionflatten">
						<div class="page-header"><h2>flatten <small></small></h2></div>
					
						<p>Flattens a nested array into a single level array</p>

						<h3>Usage:</h3>
						
						<div class="signature panel panel-default">
							<div class="panel-heading"><div class="panel-title">flatten(input, [includingObjects])</div></div>
							<ol class="list-group">
							
								<li class="list-group-item">
									<strong>input</strong> Array
									
									<br>The top level array to flatten
								</li>
							
								<li class="list-group-item">
									<strong>includingObjects</strong> boolean
									<em>Optional  (Default: false)</em>
									<br>If an object is encountered and this argument is truthy, the object will also be flattened by its property values.
								</li>
							
							</ol>
							
							
							<div class="panel-footer"><strong>Returns: </strong> Array <em class="pull-right"></em></div>
							
						</div>
						


						<div class="codeview panel panel-default">
							<div class="panel-heading" data-toggle="collapse" data-target="#functionflatten .panel-collapse">
								<i class="ico-embed"></i> View Code
							</div>
							<div class="panel-collapse collapse">
								<pre class="panel-body prettyprint"><code class="language-javascript">function flatten(input, includingObjects) {
    var result = [];

    function descend(level) {
      if (isArray(level)) {
        level.forEach(descend);
      } else if (typeof level === 'object' && includingObjects) {
        Object.keys(level).forEach(function (key) {
          descend(level[key]);
        });
      } else {
        result.push(level);
      }
    }

    descend(input);

    return result;
  }</code></pre>
							</div>
						</div>
					
					</div>
				
					<div class="piece private " id="functionextend">
						<div class="page-header"><h2>extend <small></small></h2></div>
					
						<p>Extends the first argument object with the members of all other argument objects</p>

						<h3>Usage:</h3>
						
						<div class="signature panel panel-default">
							<div class="panel-heading"><div class="panel-title">extend(object, [source])</div></div>
							<ol class="list-group">
							
								<li class="list-group-item">
									<strong>object</strong> Object
									
									<br>The destination object.
								</li>
							
								<li class="list-group-item">
									<strong>source</strong> ...Object
									<em>Optional </em>
									<br>The source objects.
								</li>
							
							</ol>
							
							
							<div class="panel-footer"><strong>Returns: </strong> Object <em class="pull-right">The now extended destination object</em></div>
							
						</div>
						


						<div class="codeview panel panel-default">
							<div class="panel-heading" data-toggle="collapse" data-target="#functionextend .panel-collapse">
								<i class="ico-embed"></i> View Code
							</div>
							<div class="panel-collapse collapse">
								<pre class="panel-body prettyprint"><code class="language-javascript">function extend(object) {
    if (!object) {
      return object;
    }

    for (var argsIndex = 1, argsLength = arguments.length; argsIndex < argsLength; argsIndex++) {
      var iterable = arguments[argsIndex];
      if (iterable) {
        for (var key in iterable) {
          object[key] = iterable[key];
        }
      }
    }
    return object;
  }</code></pre>
							</div>
						</div>
					
					</div>
				
					<div class="piece private " id="function_convertNamedParameters">
						<div class="page-header"><h2>_convertNamedParameters <small></small></h2></div>
					
						<p>Processes the freshly compiled query string, replacing all data bindings with placeholders and constructs the data array<br />If useBoundParameters is turned off, it replaces the placeholders with their escaped values.</p>

						<h3>Usage:</h3>
						
						<div class="signature panel panel-default">
							<div class="panel-heading"><div class="panel-title">_convertNamedParameters(queryString)</div></div>
							<ol class="list-group">
							
								<li class="list-group-item">
									<strong>queryString</strong> string
									
									<br>The query string to be processed
								</li>
							
							</ol>
							
							
							<div class="panel-footer"><strong>Returns: </strong> compiledQuery <em class="pull-right">The processed query</em></div>
							
						</div>
						


						<div class="codeview panel panel-default">
							<div class="panel-heading" data-toggle="collapse" data-target="#function_convertNamedParameters .panel-collapse">
								<i class="ico-embed"></i> View Code
							</div>
							<div class="panel-collapse collapse">
								<pre class="panel-body prettyprint"><code class="language-javascript">function _convertNamedParameters (queryString) {
    var data = [];

    if (useBoundParameters) {
      queryString = queryString.replace(/({{\w*}})/g, function (match, name) {
        if (dataBindings[name] === undefined) throw new Error('The data binding '+name+' could not be found.');

        data.push(dataBindings[name]);

        return '?';
      });
    } else {
      queryString = queryString.replace(/({{\w*}})/g, function (match, name) {
        if (dataBindings[name] === undefined) throw new Error('The data binding '+name+' could not be found.');

        return _escapeValue(dataBindings[name]);
      });
    }

    return {
      query: queryString,
      data: data
    };
  }</code></pre>
							</div>
						</div>
					
					</div>
				
					<div class="piece private " id="function_escapeValue">
						<div class="page-header"><h2>_escapeValue <small></small></h2></div>
					
						<p>Escapes a value for use in a MySQL query without SQL injection</p>

						<h3>Usage:</h3>
						
						<div class="signature panel panel-default">
							<div class="panel-heading"><div class="panel-title">_escapeValue(value)</div></div>
							<ol class="list-group">
							
								<li class="list-group-item">
									<strong>value</strong> *
									
									<br>The value to be escaped
								</li>
							
							</ol>
							
							
							<div class="panel-footer"><strong>Returns: </strong> string, number <em class="pull-right">The escaped value ready to be used in a query.</em></div>
							
						</div>
						


						<div class="codeview panel panel-default">
							<div class="panel-heading" data-toggle="collapse" data-target="#function_escapeValue .panel-collapse">
								<i class="ico-embed"></i> View Code
							</div>
							<div class="panel-collapse collapse">
								<pre class="panel-body prettyprint"><code class="language-javascript">function _escapeValue(value) {
    if (value === undefined || value === null) {
      return 'NULL';
    }

    switch (typeof value) {
      case 'boolean': return (value) ? 'true' : 'false';
      case 'number': return value+'';
    }

    if (value instanceof Date) {
      value = data.toISOString().slice(0, 19).replace('T', ' ');
    }

    if (typeof value === 'object') {
      throw new TypeError('Cannot escape object');
    }

    value = value.replace(/[\0\n\r\b\t\\\'\"\x1a]/g, function(s) {
      switch(s) {
        case "\0": return "\\0";
        case "\n": return "\\n";
        case "\r": return "\\r";
        case "\b": return "\\b";
        case "\t": return "\\t";
        case "\x1a": return "\\Z";
        default: return "\\"+s;
      }
    });

    return "'"+value+"'";
  }</code></pre>
							</div>
						</div>
					
					</div>
				
					<div class="piece private " id="functionqueryexport">
						<div class="page-header"><h2>query.export <small></small></h2></div>
					
						<p>Copies the attribute data for the query object and returns the copy</p>

						<h3>Usage:</h3>
						
						<div class="signature panel panel-default">
							<div class="panel-heading"><div class="panel-title">query.export()</div></div>
							<ol class="list-group">
							
							</ol>
							
							
							<div class="panel-footer"><strong>Returns: </strong> Object <em class="pull-right"></em></div>
							
						</div>
						


						<div class="codeview panel panel-default">
							<div class="panel-heading" data-toggle="collapse" data-target="#functionqueryexport .panel-collapse">
								<i class="ico-embed"></i> View Code
							</div>
							<div class="panel-collapse collapse">
								<pre class="panel-body prettyprint"><code class="language-javascript">function exportAttributes () {
    // the easiest way to make sure all the arrays are copied instead of passed by reference
    // is to serialize and deserialize the entire attributes object. Yes it's lazy, but it works perfectly
    var json = JSON.stringify(attributes);
    return JSON.parse(json);
  }</code></pre>
							</div>
						</div>
					
					</div>
				
					<div class="piece  " id="functionqueryinsertBinding">
						<div class="page-header"><h2>query.insertBinding <small></small></h2></div>
					
						<p>Stores the passed <code>value</code> under a data binding with the <code>key</code> name.<br />This allows for explicit usage of bindings within query strings.</p>

						<h3>Usage:</h3>
						
						<div class="signature panel panel-default">
							<div class="panel-heading"><div class="panel-title">query.insertBinding(key, value)</div></div>
							<ol class="list-group">
							
								<li class="list-group-item">
									<strong>key</strong> string
									
									<br>The binding name to store the value under
								</li>
							
								<li class="list-group-item">
									<strong>value</strong> mixed
									
									<br>The data to be stored
								</li>
							
							</ol>
							
							
							<div class="panel-footer"><strong>Returns: </strong> query <em class="pull-right">Exports &#x60;this&#x60; for chaining</em></div>
							
						</div>
						


						<div class="codeview panel panel-default">
							<div class="panel-heading" data-toggle="collapse" data-target="#functionqueryinsertBinding .panel-collapse">
								<i class="ico-embed"></i> View Code
							</div>
							<div class="panel-collapse collapse">
								<pre class="panel-body prettyprint"><code class="language-javascript">function insertBinding (key, value) {
    if (typeof value === 'object') {
      // if we've got a date, convert it into a mysql ready datestamp
      if (value instanceof Date) {
        value = value.toISOString().slice(0, 19).replace('T', ' ');
      } else {
        throw new TypeError('Received unparsable object as field value.');
      }
    }

    if (key.substr(0,2) !== '{{') key = '{{' + key + '}}';

    dataBindings[key] = value;

    return this;
  }</code></pre>
							</div>
						</div>
					
					</div>
				
					<div class="piece  " id="functionquerycreateBinding">
						<div class="page-header"><h2>query.createBinding <small></small></h2></div>
					
						<p>Stores the passed <code>data</code> into the data bindings collection and returns a<br />unique string representation of that data for use in the query.</p><p>Data bindings in queryize are represented by a key name surrounded by<br />double brackets.  These values are then converted to question marks after<br />the query is compiled, with the values appended to the data array.</p><p>If a <code>modifier</code> function name is provided, the returned binding will be wrapped with that MySQL function.</p>

						<h3>Usage:</h3>
						
						<div class="signature panel panel-default">
							<div class="panel-heading"><div class="panel-title">query.createBinding(value, [modifier])</div></div>
							<ol class="list-group">
							
								<li class="list-group-item">
									<strong>value</strong> mixed
									
									<br>The data to be stored
								</li>
							
								<li class="list-group-item">
									<strong>modifier</strong> string
									<em>Optional </em>
									<br>A MySQL function to wrap the binding in when it is inserted into SQL.
								</li>
							
							</ol>
							
							<pre class="panel-body prettyprint"><code class="language-javascript">query.createBinding('name@example.com');
// => "{{binding0d}}"

query.createBinding('2013-06-18', 'DATE');
// => "DATE({{binding4f}})"</code></pre>
							
							
							<div class="panel-footer"><strong>Returns: </strong> query <em class="pull-right">Exports &#x60;this&#x60; for chaining</em></div>
							
						</div>
						


						<div class="codeview panel panel-default">
							<div class="panel-heading" data-toggle="collapse" data-target="#functionquerycreateBinding .panel-collapse">
								<i class="ico-embed"></i> View Code
							</div>
							<div class="panel-collapse collapse">
								<pre class="panel-body prettyprint"><code class="language-javascript">function createBinding (value, modifier) {
    if (value === true) return 'TRUE';
    if (value === false) return 'FALSE';
    if (value === null) return 'NULL';

    if (typeof value === 'object') {
      // if we've got a date, convert it into a mysql ready datestamp
      if (value instanceof Date) {
        value = value.toISOString().slice(0, 19).replace('T', ' ');
      } else {
        throw new TypeError('Received unparsable object as field value.');
      }
    }

    var key = '{{' + _uniqueId('binding') + '}}';

    insertBinding(key, value);

    return modifier ? [modifier, '(', key, ')'].join('') : key;
  }</code></pre>
							</div>
						</div>
					
					</div>
				
					<div class="piece  " id="functionqueryselect">
						<div class="page-header"><h2>query.select <small></small></h2></div>
					
						<p>Marks the query as being a SELECT statement.</p><p>One or more columns or an array of columns to select from may be passed<br />in as arguments.  See <code>query.columns()</code> for more details.</p>

						<h3>Usage:</h3>
						
						<div class="signature panel panel-default">
							<div class="panel-heading"><div class="panel-title">query.select([columns])</div></div>
							<ol class="list-group">
							
								<li class="list-group-item">
									<strong>columns</strong> string, Array&lt;string&gt;
									<em>Optional </em>
									<br>All arguments received are passed to a &#x60;query.columns()&#x60; call
								</li>
							
							</ol>
							
							<pre class="panel-body prettyprint"><code class="language-javascript">var q = queryize()
  .select('name')
  .from('users')
  .where('user.id', 128)
  .compile()</code></pre>
							
							
							<div class="panel-footer"><strong>Returns: </strong> query <em class="pull-right">Exports &#x60;this&#x60; for chaining</em></div>
							
						</div>
						


						<div class="codeview panel panel-default">
							<div class="panel-heading" data-toggle="collapse" data-target="#functionqueryselect .panel-collapse">
								<i class="ico-embed"></i> View Code
							</div>
							<div class="panel-collapse collapse">
								<pre class="panel-body prettyprint"><code class="language-javascript">function select () {
    attributes.builder = 'select';
    if (arguments.length) {
      this.columns([].slice.call(arguments));
    }
    return this;
  }</code></pre>
							</div>
						</div>
					
					</div>
				
					<div class="piece  " id="functionquerydeleteFrom">
						<div class="page-header"><h2>query.deleteFrom <small>deleet</small></h2></div>
					
						<p>Marks the query as being a DELETE statement</p><p>Supports passing the target table and alias as syntatic sugar.  See <code>query.from()</code> for more details.</p>

						<h3>Usage:</h3>
						
						<div class="signature panel panel-default">
							<div class="panel-heading"><div class="panel-title">query.deleteFrom([tablename], [alias])</div></div>
							<ol class="list-group">
							
								<li class="list-group-item">
									<strong>tablename</strong> string, Array&lt;string&gt;
									<em>Optional </em>
									<br>Table to delete from. If an array is passed, defines the tables that will be deleted from in a multi-table delete.
								</li>
							
								<li class="list-group-item">
									<strong>alias</strong> string
									<em>Optional </em>
									<br>An alias to use for the table
								</li>
							
							</ol>
							
							<pre class="panel-body prettyprint"><code class="language-javascript">var q = queryize()
  .deleteFrom('users')
  .where({'u.id':1})
  .compile();</code></pre>
							
							<pre class="panel-body prettyprint"><code class="language-javascript">var q = queryize()
  .from('logs')
  .whereInRange('dts', null, '2014-06-01')
  .deleet()
  .compile()</code></pre>
							
							
							<div class="panel-footer"><strong>Returns: </strong> query <em class="pull-right">Exports &#x60;this&#x60; for chaining</em></div>
							
						</div>
						


						<div class="codeview panel panel-default">
							<div class="panel-heading" data-toggle="collapse" data-target="#functionquerydeleteFrom .panel-collapse">
								<i class="ico-embed"></i> View Code
							</div>
							<div class="panel-collapse collapse">
								<pre class="panel-body prettyprint"><code class="language-javascript">function deleteFrom (tablename, alias) {
    attributes.builder = 'delete';

    if (isArray(tablename)) {
      if (alias) {
        this.from(tablename.shift(), alias);
        tablename.unshift(alias);
      }
      this.columns(tablename);
    } else if (tablename) {
      this.from(tablename, alias);
    }

    return this;
  }</code></pre>
							</div>
						</div>
					
					</div>
				
					<div class="piece  " id="functionqueryinsert">
						<div class="page-header"><h2>query.insert <small></small></h2></div>
					
						<p>Marks the query as being an INSERT statement</p>

						<h3>Usage:</h3>
						
						<div class="signature panel panel-default">
							<div class="panel-heading"><div class="panel-title">query.insert([arguments])</div></div>
							<ol class="list-group">
							
								<li class="list-group-item">
									<strong>arguments</strong> mixed
									<em>Optional </em>
									<br>All arguments received are passed to a &#x60;query.set()&#x60; call
								</li>
							
							</ol>
							
							<pre class="panel-body prettyprint"><code class="language-javascript">queryize()
  .insert({name: 'joe'})
  .into('users')
  .exec(mysqlConnection, function (result) {
    var id = result.insertId;
  })</code></pre>
							
							
							<div class="panel-footer"><strong>Returns: </strong> query <em class="pull-right">Exports &#x60;this&#x60; for chaining</em></div>
							
						</div>
						


						<div class="codeview panel panel-default">
							<div class="panel-heading" data-toggle="collapse" data-target="#functionqueryinsert .panel-collapse">
								<i class="ico-embed"></i> View Code
							</div>
							<div class="panel-collapse collapse">
								<pre class="panel-body prettyprint"><code class="language-javascript">function insert () {
    attributes.builder = 'insert';
    if (arguments.length) {
      this.set([].slice.call(arguments));
    }
    return this;
  }</code></pre>
							</div>
						</div>
					
					</div>
				
					<div class="piece  " id="functionqueryupdate">
						<div class="page-header"><h2>query.update <small></small></h2></div>
					
						<p>Marks the query as being an UPDATE statement</p>

						<h3>Usage:</h3>
						
						<div class="signature panel panel-default">
							<div class="panel-heading"><div class="panel-title">query.update([tablename], [alias])</div></div>
							<ol class="list-group">
							
								<li class="list-group-item">
									<strong>tablename</strong> string
									<em>Optional </em>
									<br>Table to update
								</li>
							
								<li class="list-group-item">
									<strong>alias</strong> string
									<em>Optional </em>
									<br>An alias to use for the table
								</li>
							
							</ol>
							
							<pre class="panel-body prettyprint"><code class="language-javascript">queryize()
  .update('users')
  .set('name', 'bob')
  .where('id', 234)
  .exec(mysqlConnection) //fire and forget</code></pre>
							
							
							<div class="panel-footer"><strong>Returns: </strong> query <em class="pull-right">Exports &#x60;this&#x60; for chaining</em></div>
							
						</div>
						


						<div class="codeview panel panel-default">
							<div class="panel-heading" data-toggle="collapse" data-target="#functionqueryupdate .panel-collapse">
								<i class="ico-embed"></i> View Code
							</div>
							<div class="panel-collapse collapse">
								<pre class="panel-body prettyprint"><code class="language-javascript">function update (tablename, alias) {
    attributes.builder = 'update';
    if (tablename) {
      this.table(tablename, alias);
    }
    return this;
  }</code></pre>
							</div>
						</div>
					
					</div>
				
					<div class="piece  " id="functionquerytable">
						<div class="page-header"><h2>query.table <small>into, from</small></h2></div>
					
						<p>Defines the table that the query should be performed on.<br />Can be called directly but is better called via the syntactically correct aliases.</p>

						<h3>Usage:</h3>
						
						<div class="signature panel panel-default">
							<div class="panel-heading"><div class="panel-title">query.table(tablename, [alias])</div></div>
							<ol class="list-group">
							
								<li class="list-group-item">
									<strong>tablename</strong> string
									
									<br>
								</li>
							
								<li class="list-group-item">
									<strong>alias</strong> string
									<em>Optional </em>
									<br>An alias to use for the table
								</li>
							
							</ol>
							
							<pre class="panel-body prettyprint"><code class="language-javascript">queryize.update()
  .table('users')
  .set('name', 'bob')
  .where('id', 234)
  .exec(mysqlConnection) //fire and forget</code></pre>
							
							<pre class="panel-body prettyprint"><code class="language-javascript">var q = queryize.select()
  .from('users')
  .compile()</code></pre>
							
							<pre class="panel-body prettyprint"><code class="language-javascript">queryize.insert()
  .into('orders')
  .set(order)
  .exec(mysqlConnection) //fire and forget</code></pre>
							
							
							<div class="panel-footer"><strong>Returns: </strong> query <em class="pull-right">Exports &#x60;this&#x60; for chaining</em></div>
							
						</div>
						


						<div class="codeview panel panel-default">
							<div class="panel-heading" data-toggle="collapse" data-target="#functionquerytable .panel-collapse">
								<i class="ico-embed"></i> View Code
							</div>
							<div class="panel-collapse collapse">
								<pre class="panel-body prettyprint"><code class="language-javascript">function table (tablename, alias) {
    attributes.tableName = tablename;
    if (isDefined(alias)) {
      attributes.alias = alias;
    }
    return this;
  }</code></pre>
							</div>
						</div>
					
					</div>
				
					<div class="piece  " id="functionquerydatabase">
						<div class="page-header"><h2>query.database <small></small></h2></div>
					
						<p>Defines what database that the query should be performed on.</p><p>This is only necessary if your connection has not defined a database<br />to use, or the query needs to act upon a database other than the one<br />currently in use.</p>

						<h3>Usage:</h3>
						
						<div class="signature panel panel-default">
							<div class="panel-heading"><div class="panel-title">query.database(dbname, [tablename], [alias])</div></div>
							<ol class="list-group">
							
								<li class="list-group-item">
									<strong>dbname</strong> string
									
									<br>
								</li>
							
								<li class="list-group-item">
									<strong>tablename</strong> string
									<em>Optional </em>
									<br>
								</li>
							
								<li class="list-group-item">
									<strong>alias</strong> string
									<em>Optional </em>
									<br>An alias to use for the table
								</li>
							
							</ol>
							
							
							<div class="panel-footer"><strong>Returns: </strong> query <em class="pull-right">Exports &#x60;this&#x60; for chaining</em></div>
							
						</div>
						


						<div class="codeview panel panel-default">
							<div class="panel-heading" data-toggle="collapse" data-target="#functionquerydatabase .panel-collapse">
								<i class="ico-embed"></i> View Code
							</div>
							<div class="panel-collapse collapse">
								<pre class="panel-body prettyprint"><code class="language-javascript">function database (dbname, tablename, alias) {
    attributes.database = dbname;
    if (tablename) {
      attributes.tableName = tablename;
    }
    if (alias) {
      attributes.alias = alias;
    }
    return this;
  }</code></pre>
							</div>
						</div>
					
					</div>
				
					<div class="piece  " id="functionquerycolumns">
						<div class="page-header"><h2>query.columns <small></small></h2></div>
					
						<p>Defines what columns a SELECT statement should return, or what tables<br />a DELETE statement should delete from.</p><p>Accepts either an array of <code>columns</code>, or multiple <code>column</code> arguments.</p><p>Column names can be in any format allowed in a MySQL statement.</p><p>Calling multiple times will replace the previous columns with the new set.</p><p>By default, all queries have <code>*</code> for SELECTs and nothing for DELETEs</p>

						<h3>Usage:</h3>
						
						<div class="signature panel panel-default">
							<div class="panel-heading"><div class="panel-title">query.columns(columns, column2)</div></div>
							<ol class="list-group">
							
								<li class="list-group-item">
									<strong>columns</strong> string, Array&lt;string&gt;
									
									<br>
								</li>
							
								<li class="list-group-item">
									<strong>column2</strong> ...string
									
									<br>
								</li>
							
							</ol>
							
							<pre class="panel-body prettyprint"><code class="language-javascript">var query = queryize.select()
  .columns('users.*', 'passwords.hash as password_hash')
  .from('users')
  .join('passwords', {'users.id':'passwords.user_id'})</code></pre>
							
							<pre class="panel-body prettyprint"><code class="language-javascript">query.columns(['username', 'firstname', 'lastname']);</code></pre>
							
							
							<div class="panel-footer"><strong>Returns: </strong> query <em class="pull-right">Exports &#x60;this&#x60; for chaining</em></div>
							
						</div>
						


						<div class="codeview panel panel-default">
							<div class="panel-heading" data-toggle="collapse" data-target="#functionquerycolumns .panel-collapse">
								<i class="ico-embed"></i> View Code
							</div>
							<div class="panel-collapse collapse">
								<pre class="panel-body prettyprint"><code class="language-javascript">function columns () {
    var args = flatten([].slice.call(arguments));

    args = args.map(function (column) {
      if (typeof column === 'string') {
        return column;
      }

      if (typeof column === 'number' || column instanceof Date) {
        return createBinding(column);
      }

      if (typeof column === 'object' && isDefined(column.data)) {
        return createBinding(column.data, column.modifier);
      }

      console.log(column);
      throw new TypeError('Unknown column type');
    });

    attributes.columns = args;

    return this;
  }</code></pre>
							</div>
						</div>
					
					</div>
				
					<div class="piece  " id="functionquerycomparisonMethod">
						<div class="page-header"><h2>query.comparisonMethod <small></small></h2></div>
					
						<p>Controls the boolean operator used to combine multiple WHERE clauses</p><p>By default, Queryize will combine all top level WHERE clauses with AND operators.</p>

						<h3>Usage:</h3>
						
						<div class="signature panel panel-default">
							<div class="panel-heading"><div class="panel-title">query.comparisonMethod(condition)</div></div>
							<ol class="list-group">
							
								<li class="list-group-item">
									<strong>condition</strong> string
									
									<br>&quot;AND&quot; or &quot;OR&quot;
								</li>
							
							</ol>
							
							
							<div class="panel-footer"><strong>Returns: </strong> query <em class="pull-right">Exports &#x60;this&#x60; for chaining</em></div>
							
						</div>
						


						<div class="codeview panel panel-default">
							<div class="panel-heading" data-toggle="collapse" data-target="#functionquerycomparisonMethod .panel-collapse">
								<i class="ico-embed"></i> View Code
							</div>
							<div class="panel-collapse collapse">
								<pre class="panel-body prettyprint"><code class="language-javascript">function comparisonMethod (condition) {
    switch (condition) {
    case true:
    case 'and':
    case 'AND':
    case 'yes':
      attributes.whereBoolean = ' AND '; break;

    case false:
    case 'or':
    case 'OR':
    case 'no':
      attributes.whereBoolean = ' OR '; break;
    }
    return this;
  }</code></pre>
							</div>
						</div>
					
					</div>
				
					<div class="piece  " id="functionquerywhere">
						<div class="page-header"><h2>query.where <small></small></h2></div>
					
						<p>Adds one or more WHERE clauses to the query.</p><p>Calling multiple times will append more clauses onto the stack.</p><p>Calling without any arguments will empty the stack.</p><p>If an <code>operator</code> is provided, it will be used for all comparisons derived from this call.</p><p>If a <code>modifier</code> function name is provided, the returned binding will be wrapped with that MySQL function.</p>

						<h3>Usage:</h3>
						
						<div class="signature panel panel-default">
							<div class="panel-heading"><div class="panel-title">query.where()</div></div>
							<ol class="list-group">
							
							</ol>
							
							<pre class="panel-body prettyprint"><code class="language-javascript">//removes all existing where clauses
query.where()</code></pre>
							
							
							<div class="panel-footer"><strong>Returns: </strong> query <em class="pull-right">Exports &#x60;this&#x60; for chaining</em></div>
							
						</div>
						
						<div class="signature panel panel-default">
							<div class="panel-heading"><div class="panel-title">query.where(clause)</div></div>
							<ol class="list-group">
							
								<li class="list-group-item">
									<strong>clause</strong> string
									
									<br>A pre-written WHERE statement for direct insertion into the query
								</li>
							
							</ol>
							
							<pre class="panel-body prettyprint"><code class="language-javascript">query.where('password IS NOT NULL')
// WHERE password IS NOT NULL</code></pre>
							
							
							<div class="panel-footer"><strong>Returns: </strong> query <em class="pull-right">Exports &#x60;this&#x60; for chaining</em></div>
							
						</div>
						
						<div class="signature panel panel-default">
							<div class="panel-heading"><div class="panel-title">query.where(clauses)</div></div>
							<ol class="list-group">
							
								<li class="list-group-item">
									<strong>clause</strong> Array&lt;string&gt;
									
									<br>Multiple pre-written WHERE statements for direct insertion into the query as OR conditions unless otherwise defined.
								</li>
							
							</ol>
							
							<pre class="panel-body prettyprint"><code class="language-javascript">query.where(['account.balance > 0', 'account.gratis IS TRUE'])
// WHERE account.balance > 0 OR account.gratis IS TRUE</code></pre>
							
							<pre class="panel-body prettyprint"><code class="language-javascript">query.where(['AND', 'client.active IS TRUE', 'client.paidthru < NOW()'])
// WHERE client.active IS TRUE AND client.paidthru < NOW()</code></pre>
							
							
							<div class="panel-footer"><strong>Returns: </strong> query <em class="pull-right">Exports &#x60;this&#x60; for chaining </em></div>
							
						</div>
						
						<div class="signature panel panel-default">
							<div class="panel-heading"><div class="panel-title">query.where(field, value, [operator], [modifier])</div></div>
							<ol class="list-group">
							
								<li class="list-group-item">
									<strong>field</strong> string, Array&lt;string&gt;
									
									<br>The table field(s) to match against
								</li>
							
								<li class="list-group-item">
									<strong>value</strong> string, Array&lt;string&gt;
									
									<br>The value(s) to match with (if more than one, performs an OR comparison of each)
								</li>
							
								<li class="list-group-item">
									<strong>operator</strong> string
									<em>Optional  (Default: &#x27;=&#x27;)</em>
									<br>The operator to use when performing the comparison (e.g. =, !=, &gt;, LIKE, IS NOT, etc)
								</li>
							
								<li class="list-group-item">
									<strong>modifier</strong> string
									<em>Optional </em>
									<br>A MySQL function to wrap the binding in when it is inserted into SQL.
								</li>
							
							</ol>
							
							<pre class="panel-body prettyprint"><code class="language-javascript">query.where('age', 21, '<')
// WHERE age < ?
// Data: [21]</code></pre>
							
							<pre class="panel-body prettyprint"><code class="language-javascript">query.where('created', new Date('2014-01-01'), '>=', 'DATE')
// WHERE created >= DATE(?)
// Data: ['2014-01-01 00:00:00']</code></pre>
							
							
							<div class="panel-footer"><strong>Returns: </strong> query <em class="pull-right">Exports &#x60;this&#x60; for chaining</em></div>
							
						</div>
						
						<div class="signature panel panel-default">
							<div class="panel-heading"><div class="panel-title">query.where(pairs, [operator], [modifier])</div></div>
							<ol class="list-group">
							
								<li class="list-group-item">
									<strong>pairs</strong> Object
									
									<br>Collection of field/value pairs to match against
								</li>
							
								<li class="list-group-item">
									<strong>operator</strong> string
									<em>Optional  (Default: &#x27;=&#x27;)</em>
									<br>The operator to use when performing the comparison (e.g. =, !=, &gt;, LIKE, IS NOT, etc)
								</li>
							
								<li class="list-group-item">
									<strong>modifier</strong> string
									<em>Optional </em>
									<br>A MySQL function to wrap the binding in when it is inserted into SQL.
								</li>
							
							</ol>
							
							<pre class="panel-body prettyprint"><code class="language-javascript">query.where({studio:'Paramount', franchise: 'Star Trek' });
// WHERE studio = ? AND franchise = ?
// Data: ['Paramount', 'Star Trek']</code></pre>
							
							<pre class="panel-body prettyprint"><code class="language-javascript">query.where({'property.ownership': ['Own', 'Rent']})
// WHERE property.ownership IN (?, ?)
// Data: ['Own', 'Rent']</code></pre>
							
							<pre class="panel-body prettyprint"><code class="language-javascript">query.where({'user.gender':'M, not: true, 'profile.spouse': null})
// WHERE user.gender = ? AND profile.spouse != NULL
// Data: ['M']</code></pre>
							
							
							<div class="panel-footer"><strong>Returns: </strong> query <em class="pull-right">Exports &#x60;this&#x60; for chaining </em></div>
							
						</div>
						


						<div class="codeview panel panel-default">
							<div class="panel-heading" data-toggle="collapse" data-target="#functionquerywhere .panel-collapse">
								<i class="ico-embed"></i> View Code
							</div>
							<div class="panel-collapse collapse">
								<pre class="panel-body prettyprint"><code class="language-javascript">function where (clause, value, operator, modifier) {

    if (!isDefined(clause)) {
      attributes.where = [];
      return this;
    }

    // if a value is defined, then we're performing a field > value comparison
    // and must parse that first.
    if (value !== undefined && (typeof clause === 'string' || isArray(clause))) {
      clause = _processWhereCondition(clause, value, operator, modifier);

    // if there was no value, check to see if we got an object based where definition
    } else if (typeof clause === 'object' && !isArray(clause)) {
      modifier = operator;
      operator = value;
      clause = _processWhereObject(clause, operator, modifier);
    }

    // if we've got an array at this point, then we should parse it as if it were
    // a collection of possible conditions in an OR
    if (isArray(clause)) {
      clause = flatten(clause).map(function (c) {
        switch (typeof c) {
        case 'string': return c;
        case 'object': return _processWhereObject(clause, operator, modifier);
        default:
          throw new TypeError('Where clause could not be processed. Found ' + (typeof clause) + ' instead.');
        }
      });

      var l = clause.length, subBoolean = ' OR ';
      if (l === 1) {
        clause = clause[0];
      } else if (l > 1) {
        // if the first value in the array is "AND", reverse our typical boolean.
        if (clause[0] === 'AND') {
          subBoolean = 'AND';
          clause.shift();
        }
        clause = '(' + clause.join(subBoolean) + ')';
      } else {
        clause = null;
      }
    }

    // by now the clause should be a string. if it isn't, then someone gave us an unusable clause
    if (typeof clause === 'string') {
      attributes.where.push(clause);
    } else {
      throw new TypeError('Where clause could not be processed. Found ' + (typeof clause) + ' instead.');
    }

    return this;
  }</code></pre>
							</div>
						</div>
					
					</div>
				
					<div class="piece private " id="function_processWhereCondition">
						<div class="page-header"><h2>_processWhereCondition <small></small></h2></div>
					
						<p>Handles basic (field, value) where clauses</p>

						<h3>Usage:</h3>
						
						<div class="signature panel panel-default">
							<div class="panel-heading"><div class="panel-title">_processWhereCondition(field, value, [operator], [modifier])</div></div>
							<ol class="list-group">
							
								<li class="list-group-item">
									<strong>field</strong> string, Array&lt;string&gt;
									
									<br>
								</li>
							
								<li class="list-group-item">
									<strong>value</strong> string, Array&lt;string&gt;
									
									<br>
								</li>
							
								<li class="list-group-item">
									<strong>operator</strong> string
									<em>Optional </em>
									<br>
								</li>
							
								<li class="list-group-item">
									<strong>modifier</strong> string
									<em>Optional </em>
									<br>
								</li>
							
							</ol>
							
							
							<div class="panel-footer"><strong>Returns: </strong> query <em class="pull-right">Exports &#x60;this&#x60; for chaining</em></div>
							
						</div>
						


						<div class="codeview panel panel-default">
							<div class="panel-heading" data-toggle="collapse" data-target="#function_processWhereCondition .panel-collapse">
								<i class="ico-embed"></i> View Code
							</div>
							<div class="panel-collapse collapse">
								<pre class="panel-body prettyprint"><code class="language-javascript">function _processWhereCondition (field, value, operator, modifier) {
    if (!operator) operator = '=';

    if (isArray(field)) {
      return field.map(function (field) {
        return _processWhereCondition(field, value, operator, modifier);
      });
    }

    // if value is an array, then we need to compare against multiple values
    if (isArray(value)) {
      // if the operator is a plain equals, we should perform an IN() instead of multiple ORs
      if (operator === '=') {

        //process the values into bindings, and join the bindings inside an IN() clause
        return field + ' IN (' + value.map(function (v) { return createBinding(v, modifier); }).join(',') + ')';
      } else if (operator === '!=') {

        //process the values into bindings, and join the bindings inside an IN() clause
        return field + ' NOT IN (' + value.map(function (v) { return createBinding(v, modifier); }).join(',') + ')';

      } else {

        // process each value individually as a single condition and join the values in an OR
        return value.map(function (value) { return _processWhereCondition(field, value, operator, modifier); });

      }
    }

    return [field, operator, createBinding(value, modifier)].join(' ');
  }</code></pre>
							</div>
						</div>
					
					</div>
				
					<div class="piece private " id="function_processWhereObject">
						<div class="page-header"><h2>_processWhereObject <small></small></h2></div>
					
						<p>Handles object based where clauses</p>

						<h3>Usage:</h3>
						
						<div class="signature panel panel-default">
							<div class="panel-heading"><div class="panel-title">_processWhereObject(clause, [operator], [modifier])</div></div>
							<ol class="list-group">
							
								<li class="list-group-item">
									<strong>clause</strong> Object
									
									<br>
								</li>
							
								<li class="list-group-item">
									<strong>operator</strong> string
									<em>Optional </em>
									<br>
								</li>
							
								<li class="list-group-item">
									<strong>modifier</strong> string
									<em>Optional </em>
									<br>
								</li>
							
							</ol>
							
							
							<div class="panel-footer"><strong>Returns: </strong> query <em class="pull-right">Exports &#x60;this&#x60; for chaining</em></div>
							
						</div>
						


						<div class="codeview panel panel-default">
							<div class="panel-heading" data-toggle="collapse" data-target="#function_processWhereObject .panel-collapse">
								<i class="ico-embed"></i> View Code
							</div>
							<div class="panel-collapse collapse">
								<pre class="panel-body prettyprint"><code class="language-javascript">function _processWhereObject (clause, operator, modifier) {
    if (!operator) operator = '=';

    var not = false;
    clause = Object.keys(clause).map(function (field) {
      // if the object contains a 'not' key, all subsequent keys parsed will be negations.
      if (field === 'not' && clause[field] === true) {
        not = true;
        if (operator === '=') operator = '!=';
        return undefined;
      }

      return _processWhereCondition(field, clause[field], operator, modifier);
    });

    clause = flatten(clause).filter(function (d) { return d;});

    if (clause.length === 1) {
      return clause[0];
    } else if (clause.length > 1) {
      return '(' + clause.join(' AND ') + ')';
    }

    return undefined;
  }</code></pre>
							</div>
						</div>
					
					</div>
				
					<div class="piece  " id="functionquerywhereBetween">
						<div class="page-header"><h2>query.whereBetween <small></small></h2></div>
					
						<p>Adds a where condition for a field between two values.</p>

						<h3>Usage:</h3>
						
						<div class="signature panel panel-default">
							<div class="panel-heading"><div class="panel-title">query.whereBetween(field, from, to, modifier)</div></div>
							<ol class="list-group">
							
								<li class="list-group-item">
									<strong>field</strong> string
									
									<br>
								</li>
							
								<li class="list-group-item">
									<strong>from</strong> string, number
									
									<br>
								</li>
							
								<li class="list-group-item">
									<strong>to</strong> string, number
									
									<br>
								</li>
							
								<li class="list-group-item">
									<strong>modifier</strong> string
									
									<br>
								</li>
							
							</ol>
							
							<pre class="panel-body prettyprint"><code class="language-javascript">query.whereBetween('profile.income', 18000, 60000)
// Where profile.income BETWEEN ? AND ?
// Data: [18000, 60000]</code></pre>
							
							
							<div class="panel-footer"><strong>Returns: </strong> query <em class="pull-right">Exports &#x60;this&#x60; for chaining</em></div>
							
						</div>
						


						<div class="codeview panel panel-default">
							<div class="panel-heading" data-toggle="collapse" data-target="#functionquerywhereBetween .panel-collapse">
								<i class="ico-embed"></i> View Code
							</div>
							<div class="panel-collapse collapse">
								<pre class="panel-body prettyprint"><code class="language-javascript">function whereBetween (field, from, to, modifier) {
    where([field, 'BETWEEN', createBinding(from, modifier), 'AND', createBinding(to, modifier)].join(' '));

    return this;
  }</code></pre>
							</div>
						</div>
					
					</div>
				
					<div class="piece  " id="functionquerywhereLike">
						<div class="page-header"><h2>query.whereLike <small></small></h2></div>
					
						<p>Shortcut for performing a LIKE comparison on a field and value</p>

						<h3>Usage:</h3>
						
						<div class="signature panel panel-default">
							<div class="panel-heading"><div class="panel-title">query.whereLike(field, value, [modifier])</div></div>
							<ol class="list-group">
							
								<li class="list-group-item">
									<strong>field</strong> string, Array&lt;string&gt;, Object
									
									<br>
								</li>
							
								<li class="list-group-item">
									<strong>value</strong> string, number, Array&lt;string, number&gt;
									
									<br>
								</li>
							
								<li class="list-group-item">
									<strong>modifier</strong> string
									<em>Optional </em>
									<br>
								</li>
							
							</ol>
							
							<pre class="panel-body prettyprint"><code class="language-javascript">queryize.select()
  .from('users')
  .whereLike('email', '%gmail.com')</code></pre>
							
							
							<div class="panel-footer"><strong>Returns: </strong> query <em class="pull-right">Exports &#x60;this&#x60; for chaining</em></div>
							
						</div>
						


						<div class="codeview panel panel-default">
							<div class="panel-heading" data-toggle="collapse" data-target="#functionquerywhereLike .panel-collapse">
								<i class="ico-embed"></i> View Code
							</div>
							<div class="panel-collapse collapse">
								<pre class="panel-body prettyprint"><code class="language-javascript">function whereLike (field, value, modifier) {
    if (typeof field === 'object') {
      where(field, 'LIKE', modifier);
    } else {
      where(field, value, 'LIKE', modifier);
    }
    return this;
  }</code></pre>
							</div>
						</div>
					
					</div>
				
					<div class="piece  " id="functionquerywhereNot">
						<div class="page-header"><h2>query.whereNot <small></small></h2></div>
					
						<p>Shortcut for performing an != comparisoon on a field and value</p>

						<h3>Usage:</h3>
						
						<div class="signature panel panel-default">
							<div class="panel-heading"><div class="panel-title">query.whereNot(field, value, [modifier])</div></div>
							<ol class="list-group">
							
								<li class="list-group-item">
									<strong>field</strong> string, Array&lt;string&gt;, Object
									
									<br>
								</li>
							
								<li class="list-group-item">
									<strong>value</strong> string, number, Array&lt;string, number&gt;
									
									<br>
								</li>
							
								<li class="list-group-item">
									<strong>modifier</strong> string
									<em>Optional </em>
									<br>
								</li>
							
							</ol>
							
							<pre class="panel-body prettyprint"><code class="language-javascript">queryize.select()
  .from('users')
  .whereNot('type', 'Admin')</code></pre>
							
							
							<div class="panel-footer"><strong>Returns: </strong> query <em class="pull-right">Exports &#x60;this&#x60; for chaining</em></div>
							
						</div>
						


						<div class="codeview panel panel-default">
							<div class="panel-heading" data-toggle="collapse" data-target="#functionquerywhereNot .panel-collapse">
								<i class="ico-embed"></i> View Code
							</div>
							<div class="panel-collapse collapse">
								<pre class="panel-body prettyprint"><code class="language-javascript">function whereNot (field, value, modifier) {
    if (typeof field === 'object') {
      where(field, '!=', modifier);
    } else {
      where(field, value, '!=', modifier);
    }
    return this;
  }</code></pre>
							</div>
						</div>
					
					</div>
				
					<div class="piece  " id="functionquerywhereNotLike">
						<div class="page-header"><h2>query.whereNotLike <small></small></h2></div>
					
						<p>Shortcut for performing a NOT LIKE comparison on a field and value</p>

						<h3>Usage:</h3>
						
						<div class="signature panel panel-default">
							<div class="panel-heading"><div class="panel-title">query.whereNotLike(field, value, [modifier])</div></div>
							<ol class="list-group">
							
								<li class="list-group-item">
									<strong>field</strong> string, Array&lt;string&gt;, Object
									
									<br>[description]
								</li>
							
								<li class="list-group-item">
									<strong>value</strong> string, number, Array&lt;string, number&gt;
									
									<br>[description]
								</li>
							
								<li class="list-group-item">
									<strong>modifier</strong> string
									<em>Optional </em>
									<br>[description]
								</li>
							
							</ol>
							
							
							<div class="panel-footer"><strong>Returns: </strong> query <em class="pull-right">Exports &#x60;this&#x60; for chaining</em></div>
							
						</div>
						


						<div class="codeview panel panel-default">
							<div class="panel-heading" data-toggle="collapse" data-target="#functionquerywhereNotLike .panel-collapse">
								<i class="ico-embed"></i> View Code
							</div>
							<div class="panel-collapse collapse">
								<pre class="panel-body prettyprint"><code class="language-javascript">function whereNotLike (field, value, modifier) {
    if (typeof field === 'object') {
      where(field, 'NOT LIKE', modifier);
    } else {
      where(field, value, 'NOT LIKE', modifier);
    }
    return this;
  }</code></pre>
							</div>
						</div>
					
					</div>
				
					<div class="piece  " id="functionquerywhereInRange">
						<div class="page-header"><h2>query.whereInRange <small></small></h2></div>
					
						<p>Creates a where condition for if a field fit within a boundry of values.</p><p>Omitting/passing null to the <code>from</code> or <code>to</code> arguments will make the range boundless on that side.</p>

						<h3>Usage:</h3>
						
						<div class="signature panel panel-default">
							<div class="panel-heading"><div class="panel-title">query.whereInRange(field, [from], [to], [modifier])</div></div>
							<ol class="list-group">
							
								<li class="list-group-item">
									<strong>field</strong> string, Array&lt;string&gt;
									
									<br>
								</li>
							
								<li class="list-group-item">
									<strong>from</strong> string, number, Date
									<em>Optional </em>
									<br>
								</li>
							
								<li class="list-group-item">
									<strong>to</strong> string, number, Date
									<em>Optional </em>
									<br>
								</li>
							
								<li class="list-group-item">
									<strong>modifier</strong> string
									<em>Optional </em>
									<br>
								</li>
							
							</ol>
							
							<pre class="panel-body prettyprint"><code class="language-javascript">query.whereInRange('profile.income', 18000, 60000)
// Where profile.income BETWEEN ? AND ?
// Data: [18000, 60000]</code></pre>
							
							<pre class="panel-body prettyprint"><code class="language-javascript">query.whereInRange('age', 21)
// WHERE age >= ?
// Data: [21]</code></pre>
							
							<pre class="panel-body prettyprint"><code class="language-javascript">query.whereInRange('product.cost', null, 100)
// WHERE product.cost <= ?
// Data: [100]</code></pre>
							
							
							<div class="panel-footer"><strong>Returns: </strong> query <em class="pull-right">Exports &#x60;this&#x60; for chaining</em></div>
							
						</div>
						


						<div class="codeview panel panel-default">
							<div class="panel-heading" data-toggle="collapse" data-target="#functionquerywhereInRange .panel-collapse">
								<i class="ico-embed"></i> View Code
							</div>
							<div class="panel-collapse collapse">
								<pre class="panel-body prettyprint"><code class="language-javascript">function whereInRange (field, from, to, modifier) {
    if (isDefined(from) && isDefined(to)) {
      whereBetween(field, from, to, modifier);
    } else if (isDefined(from)) {
      where(field, from, '>=', modifier);
    } else if (isDefined(to)) {
      where(field, to, '<=', modifier);
    }
    return this;
  }</code></pre>
							</div>
						</div>
					
					</div>
				
					<div class="piece  " id="functionqueryorderBy">
						<div class="page-header"><h2>query.orderBy <small></small></h2></div>
					
						<p>Defines what columns a select statement should use to sort the results.<br />Accepts either an array of <code>columns</code>, or multiple <code>column</code> arguments.</p><p>Calling multiple times will replace the previous sort order with the new values.</p>

						<h3>Usage:</h3>
						
						<div class="signature panel panel-default">
							<div class="panel-heading"><div class="panel-title">query.orderBy(columns)</div></div>
							<ol class="list-group">
							
								<li class="list-group-item">
									<strong>columns</strong> ...string, Array&lt;string&gt;
									
									<br>Column names can be in any format allowed in a MySQL statement.
								</li>
							
							</ol>
							
							<pre class="panel-body prettyprint"><code class="language-javascript">query.orderBy('category', 'DATE(date_posted) DESC');</code></pre>
							
							
							<div class="panel-footer"><strong>Returns: </strong> query <em class="pull-right">Exports &#x60;this&#x60; for chaining</em></div>
							
						</div>
						


						<div class="codeview panel panel-default">
							<div class="panel-heading" data-toggle="collapse" data-target="#functionqueryorderBy .panel-collapse">
								<i class="ico-embed"></i> View Code
							</div>
							<div class="panel-collapse collapse">
								<pre class="panel-body prettyprint"><code class="language-javascript">function orderBy (columns) {
    var args = flatten([].slice.call(arguments));

    attributes.orderBy = args;

    return this;
  }</code></pre>
							</div>
						</div>
					
					</div>
				
					<div class="piece  " id="functionquerygroupBy">
						<div class="page-header"><h2>query.groupBy <small></small></h2></div>
					
						<p>Defines what columns and conditions a select statement should group the results under.</p><p>Accepts either an array of <code>columns</code>, or multiple <code>column</code> arguments.</p><p>Calling multiple times will replace the previous grouping rules with the new values.</p>

						<h3>Usage:</h3>
						
						<div class="signature panel panel-default">
							<div class="panel-heading"><div class="panel-title">query.groupBy(columns)</div></div>
							<ol class="list-group">
							
								<li class="list-group-item">
									<strong>columns</strong> string..., Array&lt;string&gt;
									
									<br>Column names can be in any format allowed in a MySQL statement.
								</li>
							
							</ol>
							
							<pre class="panel-body prettyprint"><code class="language-javascript">query.groupBy('user.id', 'DATE(dts)');</code></pre>
							
							
							<div class="panel-footer"><strong>Returns: </strong> query <em class="pull-right">Exports &#x60;this&#x60; for chaining</em></div>
							
						</div>
						


						<div class="codeview panel panel-default">
							<div class="panel-heading" data-toggle="collapse" data-target="#functionquerygroupBy .panel-collapse">
								<i class="ico-embed"></i> View Code
							</div>
							<div class="panel-collapse collapse">
								<pre class="panel-body prettyprint"><code class="language-javascript">function groupBy (columns) {
    var args = flatten([].slice.call(arguments));

    attributes.groupBy = args;

    return this;
  }</code></pre>
							</div>
						</div>
					
					</div>
				
					<div class="piece  " id="functionquerydistinct">
						<div class="page-header"><h2>query.distinct <small></small></h2></div>
					
						<p>Defines if a SELECT statement should return distinct results only</p>

						<h3>Usage:</h3>
						
						<div class="signature panel panel-default">
							<div class="panel-heading"><div class="panel-title">query.distinct(enable)</div></div>
							<ol class="list-group">
							
								<li class="list-group-item">
									<strong>enable</strong> boolean
									
									<br>
								</li>
							
							</ol>
							
							
							<div class="panel-footer"><strong>Returns: </strong> query <em class="pull-right">Exports &#x60;this&#x60; for chaining</em></div>
							
						</div>
						


						<div class="codeview panel panel-default">
							<div class="panel-heading" data-toggle="collapse" data-target="#functionquerydistinct .panel-collapse">
								<i class="ico-embed"></i> View Code
							</div>
							<div class="panel-collapse collapse">
								<pre class="panel-body prettyprint"><code class="language-javascript">function distinct (enable) {
    attributes.distinct = isDefined(enable) ? true : enable;
    return this;
  }</code></pre>
							</div>
						</div>
					
					</div>
				
					<div class="piece  " id="functionquerylimit">
						<div class="page-header"><h2>query.limit <small></small></h2></div>
					
						<p>Defines the maximum results the query should return, and the starting offset of the first row within a set.</p>

						<h3>Usage:</h3>
						
						<div class="signature panel panel-default">
							<div class="panel-heading"><div class="panel-title">query.limit(max, [offset])</div></div>
							<ol class="list-group">
							
								<li class="list-group-item">
									<strong>max</strong> number
									
									<br>Total results to return
								</li>
							
								<li class="list-group-item">
									<strong>offset</strong> number
									<em>Optional </em>
									<br>Starting offset of first row within the results
								</li>
							
							</ol>
							
							
							<div class="panel-footer"><strong>Returns: </strong> query <em class="pull-right">Exports &#x60;this&#x60; for chaining</em></div>
							
						</div>
						


						<div class="codeview panel panel-default">
							<div class="panel-heading" data-toggle="collapse" data-target="#functionquerylimit .panel-collapse">
								<i class="ico-embed"></i> View Code
							</div>
							<div class="panel-collapse collapse">
								<pre class="panel-body prettyprint"><code class="language-javascript">function limit (max, offset) {
    if (isDefined(max)) max = 0;
    if (isDefined(offset)) offset = 0;

    attributes.limit = max ? ['LIMIT ',Number(offset), ', ', Number(max)].join() : false;

    return this;
  }</code></pre>
							</div>
						</div>
					
					</div>
				
					<div class="piece  " id="functionqueryset">
						<div class="page-header"><h2>query.set <small></small></h2></div>
					
						<p>Defines what data to set the specified columns to during INSERT and UPDATE queries</p>

						<h3>Usage:</h3>
						
						<div class="signature panel panel-default">
							<div class="panel-heading"><div class="panel-title">query.set(statement)</div></div>
							<ol class="list-group">
							
								<li class="list-group-item">
									<strong>statement</strong> string
									
									<br>A fully written set condition
								</li>
							
							</ol>
							
							
							<div class="panel-footer"><strong>Returns: </strong> query <em class="pull-right">Exports &#x60;this&#x60; for chaining </em></div>
							
						</div>
						
						<div class="signature panel panel-default">
							<div class="panel-heading"><div class="panel-title">query.set(column, value, [modifier])</div></div>
							<ol class="list-group">
							
								<li class="list-group-item">
									<strong>column</strong> string
									
									<br>
								</li>
							
								<li class="list-group-item">
									<strong>value</strong> string, number
									
									<br>
								</li>
							
							</ol>
							
							
							<div class="panel-footer"><strong>Returns: </strong> query <em class="pull-right">Exports &#x60;this&#x60; for chaining </em></div>
							
						</div>
						
						<div class="signature panel panel-default">
							<div class="panel-heading"><div class="panel-title">query.set(data, [modifier])</div></div>
							<ol class="list-group">
							
								<li class="list-group-item">
									<strong>data</strong> Object
									
									<br>A plain object collection of column/value pairs
								</li>
							
								<li class="list-group-item">
									<strong>modifier</strong> string
									
									<br>[description]
								</li>
							
							</ol>
							
							<pre class="panel-body prettyprint"><code class="language-javascript">query.set('user.lastlogin = NOW()')
// SET user.lastlogin = NOW()</code></pre>
							
							<pre class="panel-body prettyprint"><code class="language-javascript">query.set('address', '9 Pseudopolis Yard')
// SET address = ?
// Data: ['9 Pseudopolis Yard']</code></pre>
							
							<pre class="panel-body prettyprint"><code class="language-javascript">query.set({firstname: 'Susan', lastname: 'Sto Helet'})
// SET firstname = ?, lastname = ?
// DATA: ['Susan', 'Sto Helet']</code></pre>
							
							
							<div class="panel-footer"><strong>Returns: </strong> query <em class="pull-right">Exports &#x60;this&#x60; for chaining </em></div>
							
						</div>
						


						<div class="codeview panel panel-default">
							<div class="panel-heading" data-toggle="collapse" data-target="#functionqueryset .panel-collapse">
								<i class="ico-embed"></i> View Code
							</div>
							<div class="panel-collapse collapse">
								<pre class="panel-body prettyprint"><code class="language-javascript">function set (clause, value, modifier) {

    if (!isDefined(clause)) throw new Error('You must define a field to set.');

    if (typeof clause === 'object') {
      Object.keys(clause).forEach(function (field) {
        set(field, clause[field], value);
      });
      return this;
    }

    // if we received a value, create a set clause
    if (isDefined(value)) {
      if (!isValidPrimative(value)) {
        throw new TypeError('Unknown data type in set clause');
      }
      clause = [clause, '=', createBinding(value, modifier)].join(' ');
    }

    attributes.set.push(clause);

    return this;
  }</code></pre>
							</div>
						</div>
					
					</div>
				
					<div class="piece  " id="functionqueryjoin">
						<div class="page-header"><h2>query.join <small></small></h2></div>
					
						<p>Adds a table join to the query.</p><p>Queryize will append any missing JOIN command at the beginning of a statement</p>

						<h3>Usage:</h3>
						
						<div class="signature panel panel-default">
							<div class="panel-heading"><div class="panel-title">query.join(statement)</div></div>
							<ol class="list-group">
							
								<li class="list-group-item">
									<strong>statement</strong> string
									
									<br>Fully formed join statement
								</li>
							
							</ol>
							
							<pre class="panel-body prettyprint"><code class="language-javascript">query.join('orders o ON o.client_id = c.id')
query.join('JOIN orders o ON o.client_id = c.id')
query.join('LEFT JOIN orders o ON o.client_id = c.id')</code></pre>
							
							
							<div class="panel-footer"><strong>Returns: </strong> query <em class="pull-right">Exports &#x60;this&#x60; for chaining</em></div>
							
						</div>
						
						<div class="signature panel panel-default">
							<div class="panel-heading"><div class="panel-title">query.join(tablename, options)</div></div>
							<ol class="list-group">
							
								<li class="list-group-item">
									<strong>tablename</strong> string
									
									<br>
								</li>
							
								<li class="list-group-item">
									<strong>options</strong> Object
									
									<br>Plain object containing options for the join
								</li>
							
							</ol>
							
							<pre class="panel-body prettyprint"><code class="language-javascript">query.join('orders', {alias: 'o', on: 'o.client_id = c.id'})
query.join('orders', {alias: 'o', on: {'o.client_id':'c.id'})
// JOIN orders o ON o.client_id = c.id</code></pre>
							
							<pre class="panel-body prettyprint"><code class="language-javascript">query.join('orders', {on: {'o.client_id':'c.id', not:true, o.status: [4,5]})
// JOIN orders ON o.client_id = c.id AND o.status NOT IN (?,?)
// Data: [4, 5]</code></pre>
							
							<pre class="panel-body prettyprint"><code class="language-javascript">query.join('orders', {on: {'o.client_id':'c.id', not:true, o.condition: {data: 'A'}})
// JOIN orders ON o.client_id = c.id AND o.status != ?
// Data: ['A']</code></pre>
							
							<pre class="panel-body prettyprint"><code class="language-javascript">query.join('orders', {alias: 'o', type: 'LEFT', on: 'o.client_id = c.id'})
// LEFT JOIN orders o ON o.client_id = c.id</code></pre>
							
							
							<div class="panel-footer"><strong>Returns: </strong> query <em class="pull-right">Exports &#x60;this&#x60; for chaining</em></div>
							
						</div>
						
						<div class="signature panel panel-default">
							<div class="panel-heading"><div class="panel-title">query.join(options)</div></div>
							<ol class="list-group">
							
								<li class="list-group-item">
									<strong>options</strong> Object
									
									<br>Plain object containing options for the join
								</li>
							
							</ol>
							
							<pre class="panel-body prettyprint"><code class="language-javascript">query.join({table: 'orders', alias: 'o', on: {'o.client_id':'c.id'})</code></pre>
							
							<pre class="panel-body prettyprint"><code class="language-javascript">query.join({table: 'orders', alias: 'o', type: 'LEFT' on: {'o.client_id':'c.id'})
// LEFT JOIN orders o ON o.client_id = c.id</code></pre>
							
							<pre class="panel-body prettyprint"><code class="language-javascript">query.join('orders', {on: {'o.client_id':'c.id', not:true, o.condition: {data: 'A'}})
// JOIN orders ON o.client_id = c.id AND o.status != ?
// Data: ['A']</code></pre>
							
							
							<div class="panel-footer"><strong>Returns: </strong> query <em class="pull-right">Exports &#x60;this&#x60; for chaining </em></div>
							
						</div>
						


						<div class="codeview panel panel-default">
							<div class="panel-heading" data-toggle="collapse" data-target="#functionqueryjoin .panel-collapse">
								<i class="ico-embed"></i> View Code
							</div>
							<div class="panel-collapse collapse">
								<pre class="panel-body prettyprint"><code class="language-javascript">function join (clause, options) {
    if (!isDefined(clause)) throw new Error('You must define a table to join against.');

    if (typeof clause === 'object') {

      if (isArray(clause)) throw new TypeError('Join clauses can only be strings or object definitions');
      if (!clause.table) throw new Error('You must define a table to join against');

    } else if (typeof options === 'object') {

      options = Object.create(options);
      options.table = clause;
      clause = options;

    } else if (typeof clause === 'string' && clause.search(joinTest) < 0) {

      clause = 'JOIN ' + clause;

    }

    if (typeof clause === 'object') {

      var stack = [];

      if (clause.type) stack.push(clause.type);
      stack.push('JOIN');
      stack.push(clause.table);
      if (clause.alias) stack.push(clause.alias);

      if (clause.using) {
        stack.push( 'USING (' + (isArray(clause.using) ? clause.using.join(', ') : clause.using) + ')' );

      } else if (clause.on) {
        stack.push( 'ON (' + _processJoinOns(clause.on, clause.onBoolean || 'AND') + ')' );

      }

      clause = stack.join(' ');
    }

    attributes.joins.push(clause);

    return this;
  }</code></pre>
							</div>
						</div>
					
					</div>
				
					<div class="piece  " id="functionqueryinnerJoin">
						<div class="page-header"><h2>query.innerJoin <small></small></h2></div>
					
						<p>Shortcut for creating an INNER JOIN</p><p>See <code>query.join()</code> for argument details</p>

						<h3>Usage:</h3>
						
						<div class="signature panel panel-default">
							<div class="panel-heading"><div class="panel-title">query.innerJoin()</div></div>
							<ol class="list-group">
							
							</ol>
							
							
							<div class="panel-footer"><strong>Returns: </strong> query <em class="pull-right">Exports &#x60;this&#x60; for chaining</em></div>
							
						</div>
						


						<div class="codeview panel panel-default">
							<div class="panel-heading" data-toggle="collapse" data-target="#functionqueryinnerJoin .panel-collapse">
								<i class="ico-embed"></i> View Code
							</div>
							<div class="panel-collapse collapse">
								<pre class="panel-body prettyprint"><code class="language-javascript">function innerJoin() {
    // See _makeJoiner Function
  }</code></pre>
							</div>
						</div>
					
					</div>
				
					<div class="piece  " id="functionqueryleftJoin">
						<div class="page-header"><h2>query.leftJoin <small></small></h2></div>
					
						<p>Shortcut for creating a LEFT JOIN</p><p>See <code>query.join()</code> for argument details</p>

						<h3>Usage:</h3>
						
						<div class="signature panel panel-default">
							<div class="panel-heading"><div class="panel-title">query.leftJoin()</div></div>
							<ol class="list-group">
							
							</ol>
							
							
							<div class="panel-footer"><strong>Returns: </strong> query <em class="pull-right">Exports &#x60;this&#x60; for chaining</em></div>
							
						</div>
						


						<div class="codeview panel panel-default">
							<div class="panel-heading" data-toggle="collapse" data-target="#functionqueryleftJoin .panel-collapse">
								<i class="ico-embed"></i> View Code
							</div>
							<div class="panel-collapse collapse">
								<pre class="panel-body prettyprint"><code class="language-javascript">function leftJoin() {
    // See _makeJoiner Function
  }</code></pre>
							</div>
						</div>
					
					</div>
				
					<div class="piece  " id="functionqueryrightJoin">
						<div class="page-header"><h2>query.rightJoin <small></small></h2></div>
					
						<p>Shortcut for creating a RIGHT JOIN</p><p>See <code>query.join()</code> for argument details</p>

						<h3>Usage:</h3>
						
						<div class="signature panel panel-default">
							<div class="panel-heading"><div class="panel-title">query.rightJoin()</div></div>
							<ol class="list-group">
							
							</ol>
							
							
							<div class="panel-footer"><strong>Returns: </strong> query <em class="pull-right">Exports &#x60;this&#x60; for chaining</em></div>
							
						</div>
						


						<div class="codeview panel panel-default">
							<div class="panel-heading" data-toggle="collapse" data-target="#functionqueryrightJoin .panel-collapse">
								<i class="ico-embed"></i> View Code
							</div>
							<div class="panel-collapse collapse">
								<pre class="panel-body prettyprint"><code class="language-javascript">function rightJoin() {
    // See _makeJoiner Function
  }</code></pre>
							</div>
						</div>
					
					</div>
				
					<div class="piece private " id="function_makeJoiner">
						<div class="page-header"><h2>_makeJoiner <small></small></h2></div>
					
						<p>Generates the closures for innerJoin, leftJoin and rightJoin</p>

						<h3>Usage:</h3>
						
						<div class="signature panel panel-default">
							<div class="panel-heading"><div class="panel-title">_makeJoiner(type)</div></div>
							<ol class="list-group">
							
								<li class="list-group-item">
									<strong>type</strong> string
									
									<br>Join type
								</li>
							
							</ol>
							
							
							<div class="panel-footer"><strong>Returns: </strong> function <em class="pull-right"></em></div>
							
						</div>
						


						<div class="codeview panel panel-default">
							<div class="panel-heading" data-toggle="collapse" data-target="#function_makeJoiner .panel-collapse">
								<i class="ico-embed"></i> View Code
							</div>
							<div class="panel-collapse collapse">
								<pre class="panel-body prettyprint"><code class="language-javascript">function _makeJoiner(type) {
    return function (clause, options) {

      if (typeof clause === 'object') {

        if (isArray(clause)) throw new TypeError('Join clauses can only be strings or object definitions');
        if (!clause.table) throw new Error('You must define a table to join against');

      } else if (typeof options === 'object') {

        options = Object.create(options);
        options.table = clause;
        clause = options;

      }

      if (typeof clause === 'object') {
        clause.type = type;
      } else {
        clause = clause.search(joinTest) > -1 ? clause.replace(joinTest, type+' JOIN ') : type+' JOIN ' + clause;
      }

      join(clause);

      return this;
    };
  }</code></pre>
							</div>
						</div>
					
					</div>
				
					<div class="piece private " id="function_processJoinOns">
						<div class="page-header"><h2>_processJoinOns <small></small></h2></div>
					
						<p>Processes join conditions into a standardized format that&#39;s uniformly parsable</p>

						<h3>Usage:</h3>
						
						<div class="signature panel panel-default">
							<div class="panel-heading"><div class="panel-title">_processJoinOns()</div></div>
							<ol class="list-group">
							
							</ol>
							
							
							<div class="panel-footer"><strong>Returns: </strong> Array <em class="pull-right"></em></div>
							
						</div>
						


						<div class="codeview panel panel-default">
							<div class="panel-heading" data-toggle="collapse" data-target="#function_processJoinOns .panel-collapse">
								<i class="ico-embed"></i> View Code
							</div>
							<div class="panel-collapse collapse">
								<pre class="panel-body prettyprint"><code class="language-javascript">function _processJoinOns(ons, onBoolean) {

    if (typeof ons === 'string') {
      return ons;
    }

    if (isArray(ons)) {
      ons = ons.map(function (d) { return _processJoinOns(d); });
    }

    if (typeof ons === 'object' && !isArray(ons)) {
      var not = false;
      ons = Object.keys(ons).map(function (field) {
        var value = ons[field];

        // if the object contains a 'not' key, all subsequent keys parsed will be negations.
        if (field === 'not' && value === true) {
          not = true;
          return undefined;
        }

        // if value is an array, perform an IN() on the values
        if (isArray(value)) {
          value = value.map(function (d) {return createBinding(d); });
          return [field, not ? 'NOT IN' : 'IN', '(', value.join(', '), ')'].join(' ');

        // if value is a string or a number, process as if a normal pairing of columns
        } else if (typeof value === 'string') {
          return [field, not ? '!=' : '=', value].join(' ');

        // finally, process the value as if it were an actual value for binding
        } else if (isValidPrimative(value)) {
          return [field, not ? '!=' : '=', createBinding(value)].join(' ');

        // if value is an object, verify if it's a data object, and if so create a binding for the value
        } else if (typeof value === 'object' && value.data !== undefined) {
          return [field, not ? '!=' : '=', createBinding(value.data, value.modifier)].join(' ');
        }

        // we don't know how to handle the value
        throw new Error('Encountered unexpected value while parsing a JOIN ON condition for ' + field);
      });
    }

    //remove any undefined or empty string values
    ons = ons.filter(function (d) { return d; });

    return ons.join(' '+onBoolean+' ');
  }</code></pre>
							</div>
						</div>
					
					</div>
				
					<div class="piece private " id="function_buildTableName">
						<div class="page-header"><h2>_buildTableName <small></small></h2></div>
					
						<p>Constructs the table name to use in queries, with backticks</p>

						<h3>Usage:</h3>
						
						<div class="signature panel panel-default">
							<div class="panel-heading"><div class="panel-title">_buildTableName()</div></div>
							<ol class="list-group">
							
							</ol>
							
							
							<div class="panel-footer"><strong>Returns: </strong> string <em class="pull-right"></em></div>
							
						</div>
						


						<div class="codeview panel panel-default">
							<div class="panel-heading" data-toggle="collapse" data-target="#function_buildTableName .panel-collapse">
								<i class="ico-embed"></i> View Code
							</div>
							<div class="panel-collapse collapse">
								<pre class="panel-body prettyprint"><code class="language-javascript">function _buildTableName () {
    var q = [];
    
    if (attributes.database) {
      q.push('`' + attributes.database + '`.');
    }
    
    q.push('`' + attributes.tableName + '`');
    
    if (attributes.alias) {
      q.push(' ' + attributes.alias);
    }

    return q.join('');
  }</code></pre>
							</div>
						</div>
					
					</div>
				
					<div class="piece  " id="functionquerycompile">
						<div class="page-header"><h2>query.compile <small></small></h2></div>
					
						<p>Compiles the final MySQL query</p>

						<h3>Usage:</h3>
						
						<div class="signature panel panel-default">
							<div class="panel-heading"><div class="panel-title">query.compile()</div></div>
							<ol class="list-group">
							
							</ol>
							
							
							<div class="panel-footer"><strong>Returns: </strong> Object <em class="pull-right">{query: String, data: Array&lt;String,Number&gt;}</em></div>
							
						</div>
						


						<div class="codeview panel panel-default">
							<div class="panel-heading" data-toggle="collapse" data-target="#functionquerycompile .panel-collapse">
								<i class="ico-embed"></i> View Code
							</div>
							<div class="panel-collapse collapse">
								<pre class="panel-body prettyprint"><code class="language-javascript">function compile () {
    if (!attributes.builder || !builders[attributes.builder]) throw new Error('Query operation undefined, must identify if performing a select/update/insert/delete query.');
    if (!attributes.tableName) throw new Error('No table name has been defined');

    var queryString = builders[attributes.builder]();

    return _convertNamedParameters(queryString);
  }</code></pre>
							</div>
						</div>
					
					</div>
				
					<div class="piece  " id="functionqueryexec">
						<div class="page-header"><h2>query.exec <small>run</small></h2></div>
					
						<p>Compiles the MySQL query and runs it using the provided connection or connection pool.  from node-mysql or node-mysql2.<br />If the connection provided is a node-mysql2 connection, then the query will be executed as a prepared statement (connection.execute).<br />Returns the mysql query object, extended with .then() and .catch() methods for use as a promise.</p>

						<h3>Usage:</h3>
						
						<div class="signature panel panel-default">
							<div class="panel-heading"><div class="panel-title">query.exec(connection, [options], [callback])</div></div>
							<ol class="list-group">
							
								<li class="list-group-item">
									<strong>connection</strong> Object
									
									<br>node-mysql(2) connection(Pool)
								</li>
							
								<li class="list-group-item">
									<strong>options</strong> Object
									<em>Optional </em>
									<br>Options object to be passed to &#x60;connection.query&#x60; with the query string and data mixed in.
								</li>
							
								<li class="list-group-item">
									<strong>callback</strong> Function
									<em>Optional </em>
									<br>Callback function to be invoked when the query completes.
								</li>
							
							</ol>
							
							
							<div class="panel-footer"><strong>Returns: </strong> Thenable&lt;MysqlQuery&gt; <em class="pull-right">Promise extended node-mysql query emitter object</em></div>
							
						</div>
						


						<div class="codeview panel panel-default">
							<div class="panel-heading" data-toggle="collapse" data-target="#functionqueryexec .panel-collapse">
								<i class="ico-embed"></i> View Code
							</div>
							<div class="panel-collapse collapse">
								<pre class="panel-body prettyprint"><code class="language-javascript">function exec (connection, options, callback) {
    var func;
    if (typeof connection.execute === 'function') func = 'execute';
    else if (typeof connection.query === 'function') func = 'query';
    else throw new TypeError('Connection object is not a mysql or mysql2 connection or pool.');

    var q = this.compile();

    if (debugEnabled) console.log(q);

    // if the second argument is a callback, remap the arguments
    if (!callback && typeof options === 'function') {
      callback = options;
      options = null;

    // if the second argument is an options object, wrap it and apply our query & data to it.
    } else if (typeof options === 'object') {
      options = Object.create(options);
      options.sql = q.query;
      options.values = q.data;
    }

    // generate a proxmis with the callback (if provided), which will be used to extend the query return
    var pcb = proxmis(callback);

    var emitter;
    if (options) {
      emitter = connection[func](options, pcb);
    } else {
      emitter = connection[func](q.query, q.data, pcb);
    }

    emitter.then = pcb.then;
    emitter.catch = pcb.catch;

    return emitter;
  }</code></pre>
							</div>
						</div>
					
					</div>
				
					<div class="piece  " id="methodqueryizeselect">
						<div class="page-header"><h2>queryize.select <small></small></h2></div>
					
						<p>Shortcut for creating a new select query</p><p>See <code>query.select()</code> for details.</p>

						<h3>Usage:</h3>
						
						<div class="signature panel panel-default">
							<div class="panel-heading"><div class="panel-title">queryize.select()</div></div>
							<ol class="list-group">
							
							</ol>
							
							
							<div class="panel-footer"><strong>Returns: </strong> query <em class="pull-right">Returns a &#x60;query&#x60; instance.</em></div>
							
						</div>
						


						<div class="codeview panel panel-default">
							<div class="panel-heading" data-toggle="collapse" data-target="#methodqueryizeselect .panel-collapse">
								<i class="ico-embed"></i> View Code
							</div>
							<div class="panel-collapse collapse">
								<pre class="panel-body prettyprint"><code class="language-javascript">queryize.select = function () {
  var q = queryize();
  q.select.apply(q, arguments);
  return q;
};</code></pre>
							</div>
						</div>
					
					</div>
				
					<div class="piece  " id="methodqueryizeupdate">
						<div class="page-header"><h2>queryize.update <small></small></h2></div>
					
						<p>Shortcut for creating a new update query</p><p>See <code>query.update()</code> for details.</p>

						<h3>Usage:</h3>
						
						<div class="signature panel panel-default">
							<div class="panel-heading"><div class="panel-title">queryize.update()</div></div>
							<ol class="list-group">
							
							</ol>
							
							
							<div class="panel-footer"><strong>Returns: </strong> query <em class="pull-right">Returns a &#x60;query&#x60; instance.</em></div>
							
						</div>
						


						<div class="codeview panel panel-default">
							<div class="panel-heading" data-toggle="collapse" data-target="#methodqueryizeupdate .panel-collapse">
								<i class="ico-embed"></i> View Code
							</div>
							<div class="panel-collapse collapse">
								<pre class="panel-body prettyprint"><code class="language-javascript">queryize.update = function () {
  var q = queryize();
  q.update.apply(q, arguments);
  return q;
};</code></pre>
							</div>
						</div>
					
					</div>
				
					<div class="piece  " id="methodqueryizeinsert">
						<div class="page-header"><h2>queryize.insert <small></small></h2></div>
					
						<p>Shortcut for creating a new insert query</p><p>See <code>query.insert()</code> for details.</p>

						<h3>Usage:</h3>
						
						<div class="signature panel panel-default">
							<div class="panel-heading"><div class="panel-title">queryize.insert()</div></div>
							<ol class="list-group">
							
							</ol>
							
							
							<div class="panel-footer"><strong>Returns: </strong> query <em class="pull-right">Returns a &#x60;query&#x60; instance.</em></div>
							
						</div>
						


						<div class="codeview panel panel-default">
							<div class="panel-heading" data-toggle="collapse" data-target="#methodqueryizeinsert .panel-collapse">
								<i class="ico-embed"></i> View Code
							</div>
							<div class="panel-collapse collapse">
								<pre class="panel-body prettyprint"><code class="language-javascript">queryize.insert = function () {
  var q = queryize();
  q.insert.apply(q, arguments);
  return q;
};</code></pre>
							</div>
						</div>
					
					</div>
				
					<div class="piece  " id="methodqueryizedeleteFrom">
						<div class="page-header"><h2>queryize.deleteFrom <small>deleet</small></h2></div>
					
						<p>Shortcut for creating a new delete query</p><p>See <code>query.select()</code> for details.</p>

						<h3>Usage:</h3>
						
						<div class="signature panel panel-default">
							<div class="panel-heading"><div class="panel-title">queryize.deleteFrom()</div></div>
							<ol class="list-group">
							
							</ol>
							
							
							<div class="panel-footer"><strong>Returns: </strong> query <em class="pull-right">Returns a &#x60;query&#x60; instance.</em></div>
							
						</div>
						


						<div class="codeview panel panel-default">
							<div class="panel-heading" data-toggle="collapse" data-target="#methodqueryizedeleteFrom .panel-collapse">
								<i class="ico-embed"></i> View Code
							</div>
							<div class="panel-collapse collapse">
								<pre class="panel-body prettyprint"><code class="language-javascript">queryize.deleteFrom = function () {
  var q = queryize();
  q.deleteFrom.apply(q, arguments);
  return q;
};

queryize.deleet = queryize.deleteFrom;

module.exports = queryize;</code></pre>
							</div>
						</div>
					
					</div>
				
				</div>
			</div>

			<footer>
				Queryize is copyright &copy; 2014 Jarvis Badgley and released under an MIT license.
			</footer>
		</div>

		<script src="http://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
		<script src="http://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.2.0/js/bootstrap.min.js"></script>
		<script src="http://cdnjs.cloudflare.com/ajax/libs/prettify/r298/prettify.min.js"></script>
		<script src="http://cdnjs.cloudflare.com/ajax/libs/prettify/r298/run_prettify.js"></script>
	</body>
</html>
